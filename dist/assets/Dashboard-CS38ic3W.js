import{c as M,u as A,j as e,L as u,B as c,r as L}from"./index-DJhz-PEV.js";import{u as k,C as S,B as w}from"./badge-_2Pj1FDY.js";import{b as d}from"./base44Client-DwyOm_94.js";import{M as $,B as F,S as H,a as D}from"./MainFooter-DxUiBj8v.js";import{u as T,B as p,P as R,f as B,a as E,R as K}from"./RecommendationEngine-DIgZ62DX.js";import{C as r,a as i}from"./card-76Xd0Eed.js";import{T as I,a as Q,b as j,c as y}from"./tabs-JCYqPwEp.js";import{c as N,A as G,C as O,a as W}from"./utils-DXTZs1Hh.js";import{B as J}from"./book-open-CPIwt6CZ.js";import{m as n}from"./input-CXRike3e.js";import{T as U}from"./target-C4_w4g4o.js";import{S as Y}from"./sparkles-gRCJ_j8E.js";import{U as X}from"./user-D8KfLnt_.js";import"./index-BdfcJxXA.js";const Z=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],_=M("graduation-cap",Z);const ee=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],q=M("trash-2",ee);const se=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],C=M("trophy",se);function ae(){const x=A(),{data:o=[],isLoading:h}=k({queryKey:["userProgress"],queryFn:()=>d.entities.UserProgress.list("-last_accessed")}),{data:g=[],isLoading:m}=k({queryKey:["bookmarks"],queryFn:()=>d.entities.Bookmark.list("-created_at")}),a=T({mutationFn:s=>d.entities.Bookmark.delete(s),onSuccess:()=>x.invalidateQueries({queryKey:["bookmarks"]})}),t=T({mutationFn:s=>d.entities.UserProgress.delete(s),onSuccess:()=>x.invalidateQueries({queryKey:["userProgress"]})}),v=o.filter(s=>{const l=s.completed_lessons?.length||0;return l>0&&l<(s.total_lessons||10)}),f=o.filter(s=>(s.completed_lessons?.length||0)>=(s.total_lessons||10)),b=o.filter(s=>s.is_saved),V=o.reduce((s,l)=>s+(l.time_spent_minutes||0),0),z=[{icon:J,label:"In Progress",value:v.length,color:"text-blue-500",bg:"bg-blue-50"},{icon:C,label:"Completed",value:f.length,color:"text-green-500",bg:"bg-green-50"},{icon:p,label:"Saved",value:b.length,color:"text-orange-500",bg:"bg-orange-50"},{icon:S,label:"Hours Learned",value:Math.round(V/60),color:"text-purple-500",bg:"bg-purple-50"}],P=s=>!s.completed_lessons||!s.total_lessons?0:Math.round(s.completed_lessons.length/s.total_lessons*100);return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:z.map((s,l)=>e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.1},children:e.jsx(r,{children:e.jsxs(i,{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${s.bg}`,children:e.jsx(s.icon,{className:`w-6 h-6 ${s.color}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.value}),e.jsx("p",{className:"text-sm text-gray-500",children:s.label})]})]})})},l))}),e.jsxs(I,{defaultValue:"progress",className:"space-y-6",children:[e.jsxs(Q,{className:"bg-gray-100 p-1",children:[e.jsx(j,{value:"progress",className:"px-6",children:"My Progress"}),e.jsx(j,{value:"saved",className:"px-6",children:"Saved Courses"}),e.jsx(j,{value:"bookmarks",className:"px-6",children:"Bookmarks"}),e.jsx(j,{value:"completed",className:"px-6",children:"Completed"})]}),e.jsx(y,{value:"progress",children:e.jsx("div",{className:"space-y-4",children:h?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading..."}):v.length===0?e.jsx(r,{children:e.jsxs(i,{className:"p-12 text-center",children:[e.jsx(U,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No courses in progress"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Start learning to track your progress here"}),e.jsx(u,{to:N("Home"),children:e.jsx(c,{className:"bg-[#1d69db] hover:bg-[#1557b8]",children:"Explore Courses"})})]})}):v.map((s,l)=>e.jsx(n.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:l*.1},children:e.jsx(r,{className:"overflow-hidden hover:shadow-lg transition-shadow",children:e.jsx(i,{className:"p-0",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsx("div",{className:"w-full md:w-48 h-32 md:h-auto bg-gray-100 flex-shrink-0",children:e.jsx("img",{src:s.course_image||"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&q=80",alt:s.course_title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(w,{variant:"outline",className:"mb-2 text-xs",children:s.course_category}),e.jsx("h3",{className:"font-bold text-gray-900",children:s.course_title}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[e.jsx(S,{className:"w-3 h-3 inline mr-1"}),s.course_duration]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>t.mutate(s.id),className:"text-gray-400 hover:text-red-500",children:e.jsx(q,{className:"w-4 h-4"})})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Progress"}),e.jsxs("span",{className:"font-semibold text-[#1d69db]",children:[P(s),"%"]})]}),e.jsx(R,{value:P(s),className:"h-2"})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("p",{className:"text-xs text-gray-400",children:["Last accessed:"," ",s.last_accessed?B(new Date(s.last_accessed),"MMM d, yyyy"):"N/A"]}),e.jsx(u,{to:N(`CoursePage?id=${s.course_id}`),children:e.jsxs(c,{size:"sm",className:"bg-[#1d69db] hover:bg-[#1557b8]",children:[e.jsx(E,{className:"w-4 h-4 mr-1"}),"Continue"]})})]})]})]})})})},s.id))})}),e.jsx(y,{value:"saved",children:e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:b.length===0?e.jsx(r,{className:"col-span-full",children:e.jsxs(i,{className:"p-12 text-center",children:[e.jsx(p,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No saved courses"}),e.jsx("p",{className:"text-gray-500",children:"Save courses to watch later"})]})}):b.map((s,l)=>e.jsx(n.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:l*.1},children:e.jsx(u,{to:N(`CoursePage?id=${s.course_id}`),children:e.jsxs(r,{className:"group overflow-hidden hover:shadow-lg transition-all cursor-pointer h-full",children:[e.jsx("div",{className:"relative h-36 overflow-hidden",children:e.jsx("img",{src:s.course_image||"https://images.unsplash.com/photo-1516321318423-f06f85e504b3?w=400&q=80",alt:s.course_title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsxs(i,{className:"p-4",children:[e.jsx(w,{variant:"outline",className:"mb-2 text-xs",children:s.course_category}),e.jsx("h4",{className:"font-semibold text-gray-900 line-clamp-2 group-hover:text-[#1d69db]",children:s.course_title}),e.jsxs("div",{className:"flex items-center gap-1 mt-3 text-sm text-[#1d69db] font-medium",children:["Start Learning ",e.jsx(G,{className:"w-4 h-4"})]})]})]})})},s.id))})}),e.jsx(y,{value:"bookmarks",children:e.jsx("div",{className:"space-y-3",children:m?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading..."}):g.length===0?e.jsx(r,{children:e.jsxs(i,{className:"p-12 text-center",children:[e.jsx(p,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No bookmarks yet"}),e.jsx("p",{className:"text-gray-500",children:"Bookmark specific lessons to find them quickly"})]})}):g.map((s,l)=>e.jsx(n.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:l*.05},children:e.jsx(r,{className:"hover:shadow-md transition-shadow",children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-50",children:e.jsx(p,{className:"w-5 h-5 text-[#ff6b35]"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.lesson_title}),e.jsx("p",{className:"text-sm text-gray-500",children:s.course_title}),s.notes&&e.jsxs("p",{className:"text-sm text-gray-600 mt-2 italic",children:['"',s.notes,'"']}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[e.jsx(O,{className:"w-3 h-3 inline mr-1"}),s.created_at&&B(new Date(s.created_at),"MMM d, yyyy")]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{to:N(`CoursePage?id=${s.course_id}`),children:e.jsx(c,{size:"sm",variant:"outline",children:"Go to Lesson"})}),e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>a.mutate(s.id),className:"text-gray-400 hover:text-red-500",children:e.jsx(q,{className:"w-4 h-4"})})]})]})})})},s.id))})}),e.jsx(y,{value:"completed",children:e.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-4",children:f.length===0?e.jsx(r,{className:"col-span-full",children:e.jsxs(i,{className:"p-12 text-center",children:[e.jsx(C,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No completed courses yet"}),e.jsx("p",{className:"text-gray-500",children:"Complete courses to earn certificates"})]})}):f.map((s,l)=>e.jsx(n.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:l*.1},children:e.jsxs(r,{className:"overflow-hidden",children:[e.jsx("div",{className:"relative h-32 bg-gradient-to-br from-green-500 to-emerald-600",children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(C,{className:"w-12 h-12 text-white/80"})})}),e.jsxs(i,{className:"p-4 text-center",children:[e.jsx(w,{className:"bg-green-100 text-green-700 mb-2",children:"Completed"}),e.jsx("h4",{className:"font-semibold text-gray-900",children:s.course_title}),e.jsx(c,{className:"mt-4 w-full",variant:"outline",children:"View Certificate"})]})]})},s.id))})})]})]})}function je(){const[x,o]=L.useState(null);L.useEffect(()=>{(async()=>{try{const t=await d.auth.me();o(t)}catch{console.log("User not logged in")}})()},[]);const{data:h=[]}=k({queryKey:["courseViews"],queryFn:()=>d.entities.CourseView.list("-view_count")}),g=h.length>0?h.reduce((a,t)=>(t.course_category&&(a[t.course_category]=(a[t.course_category]||0)+(t.view_count||0)),a),{}):{},m=Object.entries(g).sort((a,t)=>t[1]-a[1])[0]?.[0];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx($,{}),e.jsx("section",{className:"bg-gradient-to-br from-[#1d69db] to-[#0f4c99] text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n.div,{initial:{scale:0},animate:{scale:1},className:"w-16 h-16 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center",children:e.jsx(_,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsxs(n.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-2xl lg:text-3xl font-bold",children:["Welcome back",x?.full_name?`, ${x.full_name.split(" ")[0]}`:"","!"]}),e.jsx(n.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-blue-100 mt-1",children:m?`Continue your journey in ${m}`:"Ready to continue learning?"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(c,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10",children:e.jsx(F,{className:"w-5 h-5"})}),e.jsx(c,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10",children:e.jsx(H,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8",children:[{icon:U,label:"Set Goals",desc:"Track your progress"},{icon:Y,label:"AI Tutor",desc:"Get personalized help"},{icon:_,label:"Certificates",desc:"View earned certs"},{icon:X,label:"Profile",desc:"Update your info"}].map((a,t)=>e.jsx(n.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+t*.1},children:e.jsx(r,{className:"bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 transition-colors cursor-pointer",children:e.jsxs(i,{className:"p-4 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-white/20",children:e.jsx(a.icon,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:a.label}),e.jsx("p",{className:"text-xs text-blue-100",children:a.desc})]})]})})},t))})]})}),e.jsx("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(ae,{})}),e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsx(r,{children:e.jsx(i,{className:"p-6",children:e.jsx(K,{currentCourseId:"",currentCategory:m||""})})}),e.jsx(r,{className:"overflow-hidden",children:e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-500 p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-orange-100 text-sm",children:"Learning Streak"}),e.jsx("p",{className:"text-4xl font-bold mt-1",children:"7 Days"})]}),e.jsx("div",{className:"text-5xl",children:"ðŸ”¥"})]}),e.jsx("p",{className:"text-sm text-orange-100 mt-4",children:"Keep it up! You're on a roll."})]})}),e.jsx(r,{children:e.jsxs(i,{className:"p-6",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Upcoming Live Classes"}),e.jsx("div",{className:"space-y-4",children:[{title:"AI Fundamentals Q&A",time:"Today, 3:00 PM",instructor:"Dr. Smith"},{title:"Project Review Session",time:"Tomorrow, 10:00 AM",instructor:"Prof. Johnson"},{title:"Career Workshop",time:"Fri, 2:00 PM",instructor:"Career Team"}].map((a,t)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center flex-shrink-0",children:e.jsx(_,{className:"w-5 h-5 text-[#1d69db]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:a.title}),e.jsx("p",{className:"text-xs text-gray-500",children:a.time}),e.jsx("p",{className:"text-xs text-gray-400",children:a.instructor})]}),e.jsx(W,{className:"w-4 h-4 text-gray-400"})]},t))}),e.jsx(c,{variant:"outline",className:"w-full mt-4",children:"View All Events"})]})})]})]})}),e.jsx(D,{})]})}export{je as default};
